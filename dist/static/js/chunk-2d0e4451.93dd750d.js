(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4451"],{9004:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),a={class:"main-container"},r=Object(o["createTextVNode"])("添加 ");function l(e,t,n,l,c,i){var u=Object(o["resolveComponent"])("el-button"),d=Object(o["resolveComponent"])("TableHeader"),b=Object(o["resolveComponent"])("el-table-column"),s=Object(o["resolveComponent"])("el-switch"),p=Object(o["resolveComponent"])("el-table"),f=Object(o["resolveComponent"])("TableBody"),m=Object(o["resolveComponent"])("BaseForm"),v=Object(o["resolveComponent"])("Dialog"),O=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])("div",a,[Object(o["createVNode"])(d,{ref:"tableHeader"},{right:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{type:"primary",size:"mini",icon:"el-icon-plus",onClick:e.onAddItem},{default:Object(o["withCtx"])((function(){return[r]})),_:1},8,["onClick"])]})),_:1},512),Object(o["createVNode"])(f,{ref:"tableBody"},{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(p,{ref:"table",data:e.dataList,"header-cell-style":e.tableConfig.headerCellStyle,size:e.tableConfig.size,stripe:e.tableConfig.stripe,border:e.tableConfig.border,"row-key":"id","tree-props":{children:"children"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{align:"center",label:"序号",fixed:"left",width:"80"},{default:Object(o["withCtx"])((function(e){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$index+1),1)]})),_:1}),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.tableColumns,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:t.props,label:t.label,prop:t.prop,align:"center"},Object(o["createSlots"])({_:2},["status"===t.prop?{name:"default",fn:Object(o["withCtx"])((function(e){return[Object(o["createVNode"])(s,{modelValue:e.row.status,"onUpdate:modelValue":function(t){return e.row.status=t},"active-value":1,"inactive-value":0},null,8,["modelValue","onUpdate:modelValue"])]}))}:"actions"===t.prop?{name:"default",fn:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])(u,{type:"text",onClick:function(n){return e.onUpdateItem(t.row)}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("编辑")]})),_:2},1032,["onClick"]),Object(o["createVNode"])(u,{type:"text",onClick:function(n){return e.onDeleteItem(t.row)}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("删除")]})),_:2},1032,["onClick"])]}))}:void 0]),1032,["label","prop"])})),128))]})),_:1},8,["data","header-cell-style","size","stripe","border"]),[[O,e.tableLoading]])]})),_:1},512),Object(o["createVNode"])(v,{ref:"dialog"},{content:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{ref:"baseForm","form-items":e.formItems},null,8,["form-items"])]})),_:1},512)])}var c=n("5530"),i=(n("159b"),n("b0c0"),n("ac1f"),n("5319"),n("a434"),n("d81d"),n("030a")),u=n("4763"),d=n("e959"),b=n("5c40"),s=n("a1e9"),p=n("3fd4"),f=n("2ef0"),m=n.n(f),v="dp_code_",O=Object(b["y"])({name:"Department",setup:function(){var e=Object(s["k"])([{label:"部门名称",prop:"name"},{label:"部门编号",prop:"depCode"},{label:"排序",prop:"order"},{label:"状态",prop:"status"},{label:"操作",prop:"actions"}]),t=Object(s["m"])(),n=Object(s["m"])(),o=Object(d["c"])(),a={label:"上级部门",type:"select",name:"parentId",value:"",placeholder:"请选择上级部门",selectOptions:{},reset:function(){this.value=""}},r={label:"部门编号",type:"input",name:"depCode",value:"",maxLength:10,disabled:!1,inputType:"text",placeholder:"请输入部门编号",validator:function(e){return!!e.value||(p["p"].error(e.placeholder),!1)},reset:function(){this.value="",this.disabled=!1}},l=Object(s["k"])([a,{label:"部门名称",type:"input",name:"name",value:"",maxLength:50,inputType:"text",placeholder:"请输入部门名称",validator:function(e){return!!e.value||(p["p"].error(e.placeholder),!1)},reset:function(){this.value=""}},r,{label:"部门状态",type:"radio-group",name:"status",value:1,radioOptions:[{label:"正常",value:1},{label:"禁用",value:0}],reset:function(){this.value=1}}]),f=function(e){var n;l.forEach((function(t){var n=e[t.name];n&&("depCode"===t.name?t.value=n.replace(v,""):t.value=n)})),r.disabled=!0,null===(n=t.value)||void 0===n||n.show({showSubmitLoading:!0}).then((function(t){l.forEach((function(t){var n=e[t.name];n&&("depCode"===t.name?e[t.name]=v+t.value:e[t.name]=t.value)})),t.close()}))},O=function(){Object(i["b"])({url:u["getDepartmentList"]}).then(o.handleSuccess)};function j(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.id===t.id)return m.a.isEmpty(o.children)?void e.splice(n,1):void p["p"].error("当前部门下有子部门，不能删除");m.a.isEmpty(o.children)||j(o.children,t)}}Object(b["X"])(O);var h=function(e){p["q"].confirm("确定要删除此信息，删除后不可恢复？","提示").then((function(){j(o.dataList,e)})).catch(console.log)},C=function(){var e;l.forEach((function(e){return e.reset()})),null===(e=t.value)||void 0===e||e.show({showSubmitLoading:!0}).then((function(){var e,o,a;p["p"].success("模拟添加成功，添加参数为："+JSON.stringify(null===(e=n.value)||void 0===e?void 0:e.generatorParams())),null===(o=t.value)||void 0===o||o.closeSubmitLoading(),null===(a=t.value)||void 0===a||a.close()}))};return a.selectOptions=Object(b["n"])((function(){return o.dataList.map((function(e){return{label:e.name,value:e.id}}))})),Object(c["a"])(Object(c["a"])({tableColumns:e,formItems:l,onUpdateItem:f,dialog:t,baseForm:n},o),{},{onDeleteItem:h,onAddItem:C})}});O.render=l;t["default"]=O}}]);