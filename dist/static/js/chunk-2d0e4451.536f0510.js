(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4451"],{9004:function(e,t,n){"use strict";n.r(t);n("159b"),n("b0c0"),n("ac1f"),n("5319"),n("a434"),n("d81d");var r=n("7a23"),c=n("030a"),o=n("4763"),a=n("3ef4"),l=n("c9a1"),i=n("2ef0"),u=n.n(i),d=n("7996"),b={class:"main-container"},f=Object(r["createTextVNode"])("添加 "),s=Object(r["createTextVNode"])("编辑"),p=Object(r["createTextVNode"])("删除"),v=Object(r["defineComponent"])({setup:function(e){var t="dp_code_",n=Object(r["reactive"])([{label:"部门名称",prop:"name"},{label:"部门编号",prop:"depCode"},{label:"排序",prop:"order"},{label:"操作",prop:"actions"}]),i=Object(r["ref"])(),v=Object(r["ref"])(),O=Object(d["b"])(),j=O.tableConfig,m=O.tableLoading,h=O.dataList,C=O.handleSuccess,g=Object(r["reactive"])({label:"上级部门",name:"parentId",value:"",placeholder:"请选择上级部门",selectOptions:{},reset:function(){this.value=""}}),w={label:"部门编号",type:"input",name:"depCode",value:"",maxLength:10,disabled:!1,inputType:"text",placeholder:"请输入部门编号",validator:function(e){return!!e.value||(a["a"].error(e.placeholder),!1)},reset:function(){this.value="",this.disabled=!1}},x=Object(r["reactive"])([{label:"部门名称",type:"input",name:"name",value:"",maxLength:50,inputType:"text",placeholder:"请输入部门名称",validator:function(e){return!!e.value||(a["a"].error(e.placeholder),!1)},reset:function(){this.value=""}},w]),y=function(e){var n;x.forEach((function(n){var r=e[n.name];r&&("depCode"===n.name?n.value=r.replace(t,""):n.value=r)})),g.value=e.parentId,w.disabled=!0,null===(n=i.value)||void 0===n||n.show((function(){var e;null!==(e=v.value)&&void 0!==e&&e.checkParams()&&(i.value.loading=!0,setTimeout((function(){var e,t;a["a"].success("模拟修改成功，添加参数为："+JSON.stringify(null===(e=v.value)||void 0===e?void 0:e.generatorParams())),null===(t=i.value)||void 0===t||t.close()}),3e3))}))},k=function(){Object(c["c"])({url:o["f"]}).then(C)};function N(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t.id)return u.a.isEmpty(r.children)?void e.splice(n,1):void a["a"].error("当前部门下有子部门，不能删除");u.a.isEmpty(r.children)||N(r.children,t)}}var V=function(e){l["a"].confirm("确定要删除此信息，删除后不可恢复？","提示").then((function(){N(h,e)})).catch(console.log)},_=function(){var e;x.forEach((function(e){return e.reset()})),g.value="",null===(e=i.value)||void 0===e||e.show((function(){var e,t;if(null!==(e=v.value)&&void 0!==e&&e.checkParams()){i.value.loading=!0;var n=null===(t=v.value)||void 0===t?void 0:t.generatorParams();n.parentId=g.value,setTimeout((function(){var e;a["a"].success("模拟添加成功，添加参数为："+JSON.stringify(n)),null===(e=i.value)||void 0===e||e.close()}),1e3)}}))};return g.selectOptions=Object(r["computed"])((function(){return h.map((function(e){return{label:e.name,value:e.id}}))})),Object(r["onMounted"])(k),function(e,t){var c=Object(r["resolveComponent"])("el-button"),o=Object(r["resolveComponent"])("TableConfig"),a=Object(r["resolveComponent"])("el-table-column"),l=Object(r["resolveComponent"])("el-table"),u=Object(r["resolveComponent"])("TableBody"),d=Object(r["resolveComponent"])("TreeSelector"),O=Object(r["resolveComponent"])("el-form-item"),C=Object(r["resolveComponent"])("BaseForm"),w=Object(r["resolveComponent"])("Dialog"),N=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",b,[Object(r["createVNode"])(u,null,{tableConfig:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{border:Object(r["unref"])(j).border,"onUpdate:border":t[0]||(t[0]=function(e){return Object(r["unref"])(j).border=e}),stripe:Object(r["unref"])(j).stripe,"onUpdate:stripe":t[1]||(t[1]=function(e){return Object(r["unref"])(j).stripe=e}),onRefresh:k},{actions:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{type:"primary",size:"mini",icon:"PlusIcon",onClick:_},{default:Object(r["withCtx"])((function(){return[f]})),_:1})]})),_:1},8,["border","stripe"])]})),default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])(l,{data:Object(r["unref"])(h),"header-cell-style":Object(r["unref"])(j).headerCellStyle,size:Object(r["unref"])(j).size,stripe:Object(r["unref"])(j).stripe,border:Object(r["unref"])(j).border,"row-key":"id","tree-props":{children:"children"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,{align:"center",label:"序号",fixed:"left",width:"80"},{default:Object(r["withCtx"])((function(e){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.$index+1),1)]})),_:1}),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(n),(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(a,{key:e.props,label:e.label,prop:e.prop,align:"center"},Object(r["createSlots"])({_:2},["actions"===e.prop?{name:"default",fn:Object(r["withCtx"])((function(e){return[Object(r["createVNode"])(c,{plain:"",type:"primary",size:"mini",onClick:function(t){return y(e.row)}},{default:Object(r["withCtx"])((function(){return[s]})),_:2},1032,["onClick"]),Object(r["createVNode"])(c,{plain:"",type:"danger",size:"mini",onClick:function(t){return V(e.row)}},{default:Object(r["withCtx"])((function(){return[p]})),_:2},1032,["onClick"])]}))}:void 0]),1032,["label","prop"])})),128))]})),_:1},8,["data","header-cell-style","size","stripe","border"]),[[N,Object(r["unref"])(m)]])]})),_:1}),Object(r["createVNode"])(w,{ref:function(e,t){t["dialog"]=e,i.value=e}},{content:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{class:"padding-left padding-right",ref:function(e,t){t["baseForm"]=e,v.value=e},"form-items":Object(r["unref"])(x)},{prefix:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(O,{label:Object(r["unref"])(g).label},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{value:Object(r["unref"])(g).value,"onUpdate:value":t[2]||(t[2]=function(e){return Object(r["unref"])(g).value=e}),placeholder:"请选择上级部门",data:Object(r["unref"])(h),dataFields:{label:"name",value:"id"}},null,8,["value","data"])]})),_:1},8,["label"])]})),_:1},8,["form-items"])]})),_:1},512)])}}});const O=v;t["default"]=O}}]);